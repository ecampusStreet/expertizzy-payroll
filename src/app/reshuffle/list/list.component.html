<div class="flex-auto">
  <div class="flex flex-col">
    <app-content-navbar [isBack]="false" [title]="'reshuffle'">
    </app-content-navbar>

    <div class="min-h-screen bg-gray-100">
      <div class="flex justify-end m-3 items-center">
        <div class="w-full">
          <mat-form-field class="example-full-width w-full search-box m-0 ">
            <span matPrefix> </span>
            <input type="text" matInput placeholder="Search here" name="search" [(ngModel)]="searchText"
              (click)="search()" />
            <button matSuffix mat-button>
              <mat-icon (click)="search()">search</mat-icon>
            </button>
          </mat-form-field>
        </div>
        <div class="mx-2">
          <button mat-button color="primary" (click)="openPopup()">
            <mat-icon>filter_alt</mat-icon>
          </button>
        </div>
      </div>

      <!-- <pre>
      {{employeeList | json}}

      </pre> -->
      <!-- <no-data-found *ngIf="!holidaysList.length"></no-data-found> -->
      <div class="mt-2 mr-4 ml-4 reshuffle" *ngFor="let emp of employeeList">

        <mat-accordion class="">

          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <!-- <div  style="width: 100px;"> 
                <img *ngIf="emp?.profile_photo" src="{{emp?.profile_photo}}" style=" width: 40px;
                  border-radius: 50%;">
                  <img *ngIf="!emp?.profile_photo" src="assets/images/profile.jpg" style=" width: 40px;
                  border-radius: 50%;">
                  </div> -->

                <div class="mx-4">
                  <img *ngIf="emp?.profilePic" src="{{emp.profilePic.link}}" class="img-cell">
                  <img *ngIf="!emp?.profilePic" src="assets/images/profile.jpg" class="img-cell">
                </div>
                <div class="mx-4">
                  <span>{{emp['firstName'] | titlecase }} {{emp['fatherName'] | titlecase }} {{emp['lastName'] | titlecase }}</span>
                </div>
              </mat-panel-title>
             
            </mat-expansion-panel-header>
            <div class="grid grid-cols-5 gap-3 p-3">
              <mat-form-field class="text-xs w-full">
                <mat-label>Designation</mat-label>
                <mat-select [(ngModel)]="emp['designationId']" (selectionChange)="onChangeStatus(emp, $event.value)">
                  <mat-option *ngFor="let status of designations" [value]="status._id ">
                    {{ status.designationName | titlecase }}
                  </mat-option>
                </mat-select>
              </mat-form-field>


              <mat-form-field class="text-xs w-full">
                <mat-label>Department</mat-label>
                <mat-select [(ngModel)]="emp['departmentId']" (selectionChange)="onChangeDepartment(emp, $event.value)">
                  <mat-option *ngFor="let dep of departments" [value]="dep._id ">
                    {{ dep.departmentName | titlecase }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field class="text-xs w-full">
                <mat-label>Branch</mat-label>
                <mat-select [(ngModel)]="emp['branchId']"  (selectionChange)="onChangeBranch(emp, $event.value)">
                  <mat-option *ngFor="let branch of branches" [value]="branch._id ">
                    {{ branch.branchName | titlecase }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field class="text-xs w-full">
                <mat-label>Salary grade</mat-label>
                <mat-select [(ngModel)]="emp['salaryGradeId']"  (selectionChange)="onChangeSalaryGrade(emp, $event.value)">
                  <mat-option *ngFor="let grade of salaryGrades" [value]="grade._id ">
                    {{ grade.grade | titlecase }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field class="text-xs w-full">
                <mat-label>Shift</mat-label>
                <mat-select [(ngModel)]="emp['shiftId']"  (selectionChange)="onChangeShift(emp, $event.value)">
                  <mat-option *ngFor="let shift of shifts" [value]="shift._id ">
                    {{ shift.shift_name | titlecase }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

          </mat-expansion-panel>
        </mat-accordion>

      </div>
    </div>
  </div>
</div>